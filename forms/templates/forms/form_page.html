{% extends "layout/_layout_one_column.html" %}
{% load wagtailcore_tags wagtailimages_tags widget_type %}
{% load field_extras from form_tags %}

{% block page_title_text %}{{ page.title }}{% endblock %}

{% block main %}
	<div class="form-page">
		{% if page.warning %}
			<div class="form-page__warning">{{ page.warning|richtext }}</div>
		{% endif %}
		<div class="form-page__intro">
			{{ page.intro|richtext }}
		</div>
		<form class="basic-form" action="{% pageurl page %}" method="POST">
			{% csrf_token %}
			{% for field in form.hidden_fields %}
				{{ hidden }}
			{% endfor %}
			{% for field in form.visible_fields %}
				{% with css_modifier=field.field|widget_type %}
					{% field_extras field as extras %}
					<div class="basic-form__group basic-form__group--{{ css_modifier }}">
						<label class="basic-form__label basic-form__label--{{ css_modifier }}" for="{{ field.id_for_label }}">
							<div class="basic-form__label-title basic-form__label-title--{{ css_modifier }}">
								{{ field.label }}
								{% if field.field.required %}
									<span class="basic-form__label-required" title="Required">*</span>
								{% endif %}
							</div>
							{% if field.help_text or extras.image %}
								<div class="basic-form__label-help-text">
									{{ field.help_text|safe }}
									{% if extras.image %}
										<details>
											<summary>Show Image</summary>
											{% image extras.image max-960x950 %}
										</details>
									{% endif %}
								</div>
							{% endif %}
						</label>
						<div class="basic-form__field basic-form__field--{{ css_modifier }}">
							{{ field }}
						</div>
					</div>
				{% endwith %}
			{% endfor %}
			<button
			  class="basic-form__submit"
				type="submit"
			>
				{{ page.button_text|default:"Submit" }}
			</button>
		</form>
	</div>
{% endblock %}